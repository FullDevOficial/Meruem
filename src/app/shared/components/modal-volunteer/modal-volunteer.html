<app-custom-modal 
  [isOpen]="isOpen"
  [title]="isValidating ? '' : 'Seja voluntário'"
  [showBanner]="false"
  [showFooter]="false"
  [showHeader]="!isValidating"
  (close)="onClose()"
  [size]="isValidating ? 'lg' : 'md'">
  
  <!-- Loading/Validação -->
  @if (isValidating) {
    <app-loading-validation></app-loading-validation>
  }

  <!-- Formulário -->
  @if (!isValidating) {
  <!-- Campo Nome -->
  <div class="form-field">
    <label class="field-label">Nome:</label>
    <mat-form-field appearance="outline" class="full-width">
      <input matInput 
             placeholder="Insira seu nome" 
             [formControl]="nomeControl"
             type="text">
      <mat-error *ngIf="isFieldInvalid(nomeControl)">
        {{ getFieldErrorMessage(nomeControl, 'Nome') }}
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Campo E-mail -->
  <div class="form-field">
    <label class="field-label">E-mail:</label>
    <mat-form-field appearance="outline" class="full-width">
      <input matInput 
             placeholder="Insira seu e-mail" 
             [formControl]="emailControl"
             type="email">
      <mat-error *ngIf="isFieldInvalid(emailControl)">
        {{ getFieldErrorMessage(emailControl, 'E-mail') }}
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Campo LinkedIn -->
  <div class="form-field">
    <label class="field-label">Linkedin:</label>
    <mat-form-field appearance="outline" class="full-width">
      <input matInput 
             placeholder="Insira o seu Linkedin" 
             [formControl]="linkedinControl"
             type="text">
      <mat-error *ngIf="isFieldInvalid(linkedinControl)">
        {{ getFieldErrorMessage(linkedinControl, 'LinkedIn') }}
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Campo Telefone -->
  <div class="form-field phone-field">
    <label class="field-label">Número:</label>
    <div class="phone-inputs">
      <mat-form-field appearance="outline" class="country-code">
        <input matInput 
               [formControl]="paisControl"
               placeholder="+55"
               type="tel"
               appCountryCodeMask
               maxlength="4">
        <mat-error *ngIf="isFieldInvalid(paisControl)">
          {{ getFieldErrorMessage(paisControl, 'País') }}
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="phone-number">
        <input matInput 
               placeholder="(21) 9 88460135" 
               [formControl]="telefoneControl"
               type="tel"
               appPhoneMask
               maxlength="15">
        <mat-icon matSuffix>phone</mat-icon>
        <mat-error *ngIf="isFieldInvalid(telefoneControl)">
          {{ getFieldErrorMessage(telefoneControl, 'Telefone') }}
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <!-- Checkbox de termos -->
  <div class="checkbox-container">
    <mat-checkbox [formControl]="termosControl">
      Concordo com os termos de usuário
    </mat-checkbox>
  </div>

  <!-- Botão de envio -->
  <button 
    class="submit-button" 
    (click)="onSubmit()"
    [disabled]="!isFormValid()">
    Enviar
  </button>
  }
</app-custom-modal>

<!-- Modal de Sucesso -->
<app-modal-success
  [isOpen]="showSuccess"
  [title]="'Pronto! Estamos de olho em você.'"
  [message]="'Você foi adicionado ao nosso banco de dados. Assim que surgir uma oportunidade, entraremos em contato'"
  [primaryButtonText]="'Fechar'"
  [secondaryButtonText]="''"
  (close)="onSuccessClose()"
  (primaryAction)="onSuccessClose()">
</app-modal-success>